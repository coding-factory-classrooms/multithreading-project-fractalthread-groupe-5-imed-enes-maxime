#parse("base.html")
#@mainLayout()
<h1>Home Template</h1>
<div>
    <img id="fractalImage"/>
    <button onclick="move('x',-1)">Left</button>
    <button onclick="move('x',1)">Right</button>
    <button onclick="move('y',-1)">Up</button>
    <button onclick="move('y',1)">Down</button>
    <button onclick="move('z',-1)">Zoom +</button>
    <button onclick="move('z',1)">Zoom -</button>
    <button onclick="goToDetails()">Info</button>
    <label>
        Change pas :
        <input id="inputPas" type="number" onchange="changePas(this.value)"/>
    </label>
</div>
<script>
    const positions = {
        x: 0,
        y: 0,
        z: 4,
    };
    let pas = 10;
    const FRACTAL_IMAGE = document.getElementById("fractalImage");
    const INPUT_PAS = document.getElementById("inputPas");
    changeFractalImage();
    INPUT_PAS.value = pas;

    function move(axis,value) {
        value *= (Math.log(2) * positions.z) / pas;
        positions[axis] += value;
        onPosChange();
    }

    function onPosChange() {
        console.log(positions);
        changeFractalImage();
    }
    function changeFractalImage() {
        FRACTAL_IMAGE.src = `fractals/${positions.x}/${positions.y}/${positions.z}`;
    }
    function goToDetails() {
        location.href = `fractals/${positions.x}/${positions.y}/${positions.z}/details`
    }

    function changePas(value) {
        pas = value;
    }

</script>
#end
